"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.sudo = void 0;

require("source-map-support/register");

var _util = require("util");

var _child_process = require("child_process");

var _sudoPrompt = _interopRequireDefault(require("sudo-prompt"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const which = async (type, prog, promise) => {
  if ((0, _child_process.spawnSync)('which', [prog]).status === 0) {
    await promise();
  } else {
    throw new Error(`${prog} is required to install ${type} packages`);
  }
};

const sudo = (type, prog, args) => which(type, prog, () => (0, _util.promisify)(_sudoPrompt.default.exec)(`${prog} ${args}`, {
  name: 'Electron Forge'
}));

exports.sudo = sudo;
var _default = which;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2xpbnV4LWluc3RhbGxlci50cyJdLCJuYW1lcyI6WyJ3aGljaCIsInR5cGUiLCJwcm9nIiwicHJvbWlzZSIsInN0YXR1cyIsIkVycm9yIiwic3VkbyIsImFyZ3MiLCJzdWRvUHJvbXB0IiwiZXhlYyIsIm5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsS0FBSyxHQUFHLE9BQU9DLElBQVAsRUFBcUJDLElBQXJCLEVBQW1DQyxPQUFuQyxLQUFtRTtBQUMvRSxNQUFJLDhCQUFVLE9BQVYsRUFBbUIsQ0FBQ0QsSUFBRCxDQUFuQixFQUEyQkUsTUFBM0IsS0FBc0MsQ0FBMUMsRUFBNkM7QUFDM0MsVUFBTUQsT0FBTyxFQUFiO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsVUFBTSxJQUFJRSxLQUFKLENBQVcsR0FBRUgsSUFBSywyQkFBMEJELElBQUssV0FBakQsQ0FBTjtBQUNEO0FBQ0YsQ0FORDs7QUFRTyxNQUFNSyxJQUFJLEdBQUcsQ0FBQ0wsSUFBRCxFQUFlQyxJQUFmLEVBQTZCSyxJQUE3QixLQUE4Q1AsS0FBSyxDQUFDQyxJQUFELEVBQU9DLElBQVAsRUFBYSxNQUFNLHFCQUFVTSxvQkFBV0MsSUFBckIsRUFBNEIsR0FBRVAsSUFBSyxJQUFHSyxJQUFLLEVBQTNDLEVBQThDO0FBQUVHLEVBQUFBLElBQUksRUFBRTtBQUFSLENBQTlDLENBQW5CLENBQWhFOzs7ZUFFUVYsSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gJ3V0aWwnO1xuaW1wb3J0IHsgc3Bhd25TeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgc3Vkb1Byb21wdCBmcm9tICdzdWRvLXByb21wdCc7XG5cbmNvbnN0IHdoaWNoID0gYXN5bmMgKHR5cGU6IHN0cmluZywgcHJvZzogc3RyaW5nLCBwcm9taXNlOiAoKSA9PiBQcm9taXNlPGFueT4pID0+IHtcbiAgaWYgKHNwYXduU3luYygnd2hpY2gnLCBbcHJvZ10pLnN0YXR1cyA9PT0gMCkge1xuICAgIGF3YWl0IHByb21pc2UoKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJvZ30gaXMgcmVxdWlyZWQgdG8gaW5zdGFsbCAke3R5cGV9IHBhY2thZ2VzYCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBzdWRvID0gKHR5cGU6IHN0cmluZywgcHJvZzogc3RyaW5nLCBhcmdzOiBzdHJpbmcpID0+IHdoaWNoKHR5cGUsIHByb2csICgpID0+IHByb21pc2lmeShzdWRvUHJvbXB0LmV4ZWMpKGAke3Byb2d9ICR7YXJnc31gLCB7IG5hbWU6ICdFbGVjdHJvbiBGb3JnZScgfSkpO1xuXG5leHBvcnQgZGVmYXVsdCB3aGljaDtcbiJdfQ==